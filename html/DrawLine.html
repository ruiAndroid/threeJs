<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>画线</title>
    <link rel="stylesheet" href="../css/DrawLine.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!--jquery-->
    <script src="../lib/jquery-3.3.1.min.js"></script>
    <!--three.js-->
    <script src="../lib/three.min.js"></script>
    <!--h5屏幕适配-->
    <script type="text/javascript">
        //根据屏幕大小改变根元素字体大小 750为基准
        (function(doc, win) {
            var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function() {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    if (clientWidth >= 750) { //750这个值，根据设计师的psd宽度来修改，是多少就写多少
                        docEl.style.fontSize = '100px';
                    } else {
                        docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
                    }
                };

            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);

    </script>

    <script type="text/javascript">
        //渲染器
        let render;
        let width;
        let height;
        function initThree(){
            width=$(".canvas-frame").width();
            height=$(".canvas-frame").height();
            console.log(width,height);
            render=new THREE.WebGLRenderer({
                antialias:true,     //设置为抗锯齿
            })

            render.setSize(width,height);
            //将场景挂载到div下 jQuery的append
            $(".canvas-frame").append(render.domElement);
            // render.setClearColor(0xfffff,1.0)
        }

        /**
         * 初始化相机
         */
        let camera;
        function initCamera(){
            camera=new THREE.PerspectiveCamera();
            camera.position.x = 0;
            camera.position.y = 1000;
            camera.position.z = 0;
            camera.up.x = 0;
            camera.up.y = 0;
            camera.up.z = 1;        //表示z轴为相机的上方
            //相机的观察点,相机在全局空间中的位置
            camera.lookAt(0,0,0);
        }

        /**
         * 初始化场景
         */
        let scene;
        function initScene(){
            scene=new THREE.Scene();

        }

        /**
         * 初始化光线
         */
        let light;
        function initLight() {
            light = new THREE.DirectionalLight(0xFF0000, 1.0, 0);
            light.position.set(100, 100, 200);
            scene.add(light);
        }

        /**
         * 初始化对象
         */
        let cube;
        function initObject(){
            let geometry = new THREE.Geometry();
            let material = new THREE.LineBasicMaterial( { vertexColors: true} );
            let color1 = new THREE.Color(0xffffff), color2 = new THREE.Color(0xffffff);

            // 线的材质可以由2点的颜色决定
            let p1 = new THREE.Vector3(-500,0,0);
            let p2 = new THREE.Vector3(500,0,0);
            geometry.vertices.push(p1);
            geometry.vertices.push(p2);
            geometry.colors.push(color1, color2);
            for(let i=0;i<20;i++){
                let line = new THREE.Line(geometry,material, THREE.LineSegments);
                line.position.z=(i*50-500);
                scene.add(line);

                let line2=new THREE.Line(geometry,material, THREE.LineSegments);
                line2.position.x=(i*50-500);
                line2.rotation.y=90 * Math.PI / 180;
                scene.add(line2);
            }

        }


        function onThreeStart(){

            initThree();
            initCamera();
            initScene();
            // initLight();
            initObject();
            render.clear();
            render.render(scene,camera);

        }

        //文档加载完成之后执行该方法
        $(document).ready(()=>{
            onThreeStart();
        });


    </script>
</head>
<body>
    <div class="canvas-frame">

    </div>
</body>
</html>